{% extends "admin/base.html" %}
{% block title %}SPKR Admin — Settings{% endblock %}

{% block content %}
<div class="admin-header">
    <h1><i class="bi bi-gear-fill"></i> System Settings</h1>
    <p>Configure platform behavior</p>
</div>

<div class="detail-card">
    <form method="POST" action="{{ url_for('admin.settings') }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <div class="settings-grid">
            <div class="setting-item">
                <label class="form-label fw-semibold">Auto Publish</label>
                <select name="setting_auto_publish" class="form-select">
                    <option value="false" {{ 'selected' if settings.get('auto_publish')=='false' }}>Disabled (Manual
                        approval)</option>
                    <option value="true" {{ 'selected' if settings.get('auto_publish')=='true' }}>Enabled (Auto publish
                        after moderation)</option>
                </select>
                <small class="text-muted">If enabled, posts that pass moderation are published automatically.</small>
            </div>

            <div class="setting-item">
                <label class="form-label fw-semibold">Require Approval</label>
                <select name="setting_require_approval" class="form-select">
                    <option value="true" {{ 'selected' if settings.get('require_approval')=='true' }}>Yes</option>
                    <option value="false" {{ 'selected' if settings.get('require_approval')=='false' }}>No</option>
                </select>
                <small class="text-muted">If yes, all posts require manual admin approval before publishing.</small>
            </div>

            <div class="setting-item">
                <label class="form-label fw-semibold">Free Post Limit (per day)</label>
                <input type="number" name="setting_free_post_limit_per_day" class="form-control"
                    value="{{ settings.get('free_post_limit_per_day', '5') }}" min="1" max="100">
                <small class="text-muted">Maximum number of free posts per IP per day.</small>
            </div>

            <div class="setting-item">
                <label class="form-label fw-semibold">Promo Price Min ($)</label>
                <input type="number" step="0.01" name="setting_promo_price_min" class="form-control"
                    value="{{ settings.get('promo_price_min', '1.00') }}" min="0.50" max="100">
            </div>

            <div class="setting-item">
                <label class="form-label fw-semibold">Promo Price Max ($)</label>
                <input type="number" step="0.01" name="setting_promo_price_max" class="form-control"
                    value="{{ settings.get('promo_price_max', '2.00') }}" min="0.50" max="100">
            </div>

            <div class="setting-item">
                <label class="form-label fw-semibold">Max Caption Length</label>
                <input type="number" name="setting_max_caption_length" class="form-control"
                    value="{{ settings.get('max_caption_length', '2200') }}" min="10" max="5000">
            </div>

            <div class="setting-item">
                <label class="form-label fw-semibold">Block Links in Captions</label>
                <select name="setting_block_links" class="form-select">
                    <option value="true" {{ 'selected' if settings.get('block_links')=='true' }}>Yes — Block all URLs
                    </option>
                    <option value="false" {{ 'selected' if settings.get('block_links')=='false' }}>No — Allow URLs
                    </option>
                </select>
            </div>
        </div>

        <button type="submit" class="btn btn-primary mt-4">
            <i class="bi bi-check-lg"></i> Save Settings
        </button>
    </form>
</div>
{% endblock %}